<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Smart Remote Control</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" type="text/css" href="//unpkg.com/uiswitch@1.1.1/css/uiswitch.css">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/clockpicker.css') }}">

    <script>
      function getStylesheet() {
        let currentTime = new Date().getHours();
        if (22 <= currentTime && currentTime <= 24 || 0 <= currentTime && currentTime < 5)
          document.write("<link rel='stylesheet' href={{ url_for('static', filename='css/night.css') }} type='text/css'>");
      }

      getStylesheet();
    </script>

    {% include 'base-scripts.html.j2' %}
    {% import "macros.html.j2" as macros %}
    {% include 'favicons.html.j2' %}

    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
    <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>

    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script> -->
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>

    <!-- <script src="//bundle.run/css-scroll-snap-polyfill@0.1.2"></script> -->
    <script src="{{ url_for('static', filename='js/css-scroll-snap-polyfill@0.1.2.js') }}"></script>

    <script src="{{ url_for('static', filename='js/clockpicker.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap-datepicker.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap-confirmation.min.js') }}"></script>

    <script src="{{ url_for('static', filename='js/velocity.min.js') }}"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.5.2/velocity.min.js"></script> -->

    <script>
      cssScrollSnapPolyfill();
    </script>
  </head>
  <body>

    <div id="toast-container">
      <div id="result" class="alert alert-success" style="display: none;">Success!</div>
      <div id="error" class="alert alert-danger" style="display: none;">Error!</div>
    </div>

    <div class="container">
      <div class="jumbotron">
        <h1>Smart Remote Control</h1>
        <div id=logo></div>
      </div>
      <div id="first-row" class="row">
        <div class="col-xs-12 col-sm-7 col-md-7 col-lg-7">
          <button type="button" class="btn btn-primary btn-speak" onclick="speak();">Speak</button>
        </div>
        <!-- iframe below is used to trigger browser 'save password' dialog -->
        <iframe src="{{ url_for('static', filename='ablankpage.htm') }}" id="temp" name="temp" style="display:none"></iframe>
        <form id="creds" class="col-xs-12 col-sm-5 col-md-5 col-lg-5" target="temp">
          <div class="row">
            <div class="form-group">
              <input id="usr" class="form-control" name="user" placeholder="user">
            </div>
            <div class="form-group">
              <input id="pwd" class="form-control" name="password" type="password" placeholder="password">
            </div>
          </div>
          <input id="submit_button" style="display: none;" value="Login" type="submit">
        </form>
      </div>
      <div class="row">
        <div class="col-sm-7">
          <h3 id="speech-status"></h3>
        </div>
      </div>
    </div>

    <div id="pages">
      <section>
        <div id="activitiesContainer">
          {% set count = [0] %}
          {% for group in activities.groups %}
            {{ macros.createCommand(group, count) }}
          {% endfor %}
        </div>
      </section>

      <section>
        <div id="scheduleContainer">
          {% for event in activities.scheduled %}
            {{ macros.createBlock(event, now) }}
          {% endfor %}

          <div class="block btn-lg" id="new-event">
            <span class="glyphicon glyphicon-plus"></span>
          </div>
        </div>
      </section>
    </div>

    {% include 'modal.html.j2' %}
    {% include 'scheduling-scripts.html.j2' %}
  </body>
</html>
